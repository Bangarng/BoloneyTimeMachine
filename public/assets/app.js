var COMICS_URL="\\comics.json",COMICS=[];function getComicsJson(){$.ajax({url:COMICS_URL,dataType:"json",method:"GET",processData:!1}).done(function(t){COMICS=t,$(onReady)}).fail(function(t,n){}).always(function(){})}var Navigation=function(){var t=0,n=null;function i(){var i,a=COMICS[t];i=a.title,window.location.hash="#/"+i,n=i,$(".comicStrip").attr("src","strips"+a.url),$("#BTM-Comic-Title-Mobile").text(a.title),0==t&&($(".nav-btn-first").hide(),$(".nav-btn-left").hide()),t==COMICS.length-1&&($(".nav-btn-last").hide(),$(".nav-btn-right").hide()),null!=window.DISQUS?DISQUS.reset({reload:!0,config:function(){this.page.url=window.origin,this.page.identifier=n}}):window.disqus_config=function(){this.page.url=window.origin,this.page.identifier=n}}function a(){$(this).on("click",e)}function e(n){var a=$(this),e=null;switch(n.preventDefault(),a.hasClass("nav-btn-first")&&(e="first"),a.hasClass("nav-btn-last")&&(e="last"),a.hasClass("nav-btn-left")&&(e="left"),a.hasClass("nav-btn-right")&&(e="right"),a.hasClass("nav-btn-random")&&(e="random"),$("[class*='nav-btn']").show(),e){case"first":t=0;break;case"last":t=COMICS.length-1;break;case"left":if(0==t)return;t-=1;break;case"right":if(t==COMICS.length-1)return;t+=1;break;case"random":t=function n(){var i=Math.floor(Math.random()*(COMICS.length-1));if(i==t)return n();return i}()}i()}return{initialize:function(){$("[class*='nav-btn-']").each(a),function(){var i=window.location.hash;if(""==(i=i.split("#/")[1])||void 0==i)COMICS.length>0&&(t=COMICS.length-1);else for(var a=decodeURI(i),e=0;e<COMICS.length;e++)if(COMICS[e].title==a){t=e;break}n=i}(),i();var e=document.createElement("script");e.id="commentStrip",e.src="https://boloneytimemachine.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),$("#disqus_thread").append(e)}}}();function onLoad(){getComicsJson()}function onReady(){Navigation.initialize()}onLoad();